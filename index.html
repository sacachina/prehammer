
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<title>拍賣研究面板</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto}
.card{border:1px solid #e5e7eb;border-radius:12px;padding:14px;margin:14px 0}
#notesGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px}
.noteCard{border:1px solid #e5e7eb;border-radius:10px;overflow:hidden;text-decoration:none;color:#111}
.noteThumb{aspect-ratio:4/3;background:#f3f4f6}
.noteThumb img{width:100%;height:100%;object-fit:cover}
.noteTitle{padding:8px 10px;font-size:13px;line-height:1.4}
#noteModal{display:none}
#noteModal .mask{position:fixed;inset:0;background:rgba(0,0,0,.45)}
#noteModal .box{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:14px;padding:20px;width:min(720px,90vw)}
</style>
</head>
<body>

<div class="card">
  <h2>拍賣資料庫｜最新動態</h2>
  <div class="muted">近期香港與國際重要拍賣成交與流拍記錄</div>
  <div id="notesGrid"></div>
</div>

<div id="noteModal">
  <div class="mask" onclick="closeModal()"></div>
  <div class="box">
    <h3 id="mTitle"></h3>
    <p id="mExcerpt"></p>
    <a id="mLink" target="_blank">閱讀原文</a>
  </div>
</div>

<script>
async function loadNotes(){
  const r = await fetch("/notes?limit=10&ts="+Date.now());
  const j = await r.json();
  const g = document.getElementById("notesGrid");
  if(!j.ok){ g.innerHTML=""; return; }
  g.innerHTML = j.items.map(it=>`
    <a class="noteCard" href="javascript:void(0)" onclick="openModal('${it.slug}')">
      <div class="noteThumb">${it.image?`<img src="${it.image}">`:""}</div>
      <div class="noteTitle">${it.title}</div>
    </a>
  `).join("");
}
async function openModal(slug){
  const r = await fetch("/notes?slug="+slug+"&ts="+Date.now());
  const j = await r.json();
  if(!j.ok) return;
  document.getElementById("mTitle").textContent = j.note.title;
  document.getElementById("mExcerpt").textContent = j.note.excerpt || "";
  document.getElementById("mLink").href = j.note.url;
  document.getElementById("noteModal").style.display="block";
}
function closeModal(){ document.getElementById("noteModal").style.display="none"; }
loadNotes();
</script>

</body>
</html>
